<% const content = `
<div class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <div class="bg-gradient-to-r from-indigo-600 to-blue-600 text-white py-16">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl font-bold mb-4">Notifications</h1>
            <p class="text-xl text-indigo-100 max-w-2xl mx-auto">
                Stay updated with your swaps, messages, and ReWear community activity.
            </p>
        </div>
    </div>

    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Notification Controls -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-8">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0">
                <div class="flex items-center space-x-4">
                    <button id="mark-all-read" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors">
                        <i class="fas fa-check-double mr-2"></i>
                        Mark All Read
                    </button>
                    <button id="clear-all" class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-md transition-colors">
                        <i class="fas fa-trash mr-2"></i>
                        Clear All
                    </button>
                </div>

                <div class="flex items-center space-x-4">
                    <!-- Filter Dropdown -->
                    <select id="notification-filter" class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        <option value="all">All Notifications</option>
                        <option value="unread">Unread Only</option>
                        <option value="swaps">Swaps</option>
                        <option value="messages">Messages</option>
                        <option value="points">Points</option>
                        <option value="system">System</option>
                    </select>

                    <!-- Settings Button -->
                    <button id="notification-settings" class="p-2 text-gray-600 hover:text-gray-900 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Notifications List -->
        <div class="space-y-4">
            <!-- Unread Notification -->
            <div class="bg-white border-l-4 border-blue-500 rounded-lg shadow-md p-6 notification-item unread" data-id="1" data-type="swap">
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-exchange-alt text-blue-600"></i>
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center justify-between">
                            <p class="text-sm font-medium text-gray-900">New Swap Request</p>
                            <div class="flex items-center space-x-2">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                    Unread
                                </span>
                                <span class="text-xs text-gray-500">2 minutes ago</span>
                            </div>
                        </div>
                        <p class="mt-1 text-sm text-gray-600">
                            <strong>Sarah Johnson</strong> wants to swap their "Designer Handbag" for your "Vintage Leather Jacket"
                        </p>
                        <div class="mt-3 flex space-x-3">
                            <button class="px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded-md transition-colors">
                                View Request
                            </button>
                            <button class="px-3 py-1 bg-gray-300 hover:bg-gray-400 text-gray-700 text-sm rounded-md transition-colors">
                                Dismiss
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Read Notification -->
            <div class="bg-white border-l-4 border-gray-300 rounded-lg shadow-md p-6 notification-item read" data-id="2" data-type="points">
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-coins text-yellow-600"></i>
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center justify-between">
                            <p class="text-sm font-medium text-gray-900">Points Received</p>
                            <span class="text-xs text-gray-500">1 hour ago</span>
                        </div>
                        <p class="mt-1 text-sm text-gray-600">
                            You received <strong>25 points</strong> from Mike Chen with message: "Thanks for the great swap!"
                        </p>
                    </div>
                </div>
            </div>

            <!-- Message Notification -->
            <div class="bg-white border-l-4 border-green-500 rounded-lg shadow-md p-6 notification-item unread" data-id="3" data-type="messages">
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-comment text-green-600"></i>
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center justify-between">
                            <p class="text-sm font-medium text-gray-900">New Message</p>
                            <div class="flex items-center space-x-2">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    Unread
                                </span>
                                <span class="text-xs text-gray-500">3 hours ago</span>
                            </div>
                        </div>
                        <p class="mt-1 text-sm text-gray-600">
                            <strong>Emma Wilson</strong> sent you a message about "Vintage Sneakers"
                        </p>
                        <div class="mt-3">
                            <button class="px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded-md transition-colors">
                                Read Message
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Notification -->
            <div class="bg-white border-l-4 border-gray-300 rounded-lg shadow-md p-6 notification-item read" data-id="4" data-type="system">
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-bell text-purple-600"></i>
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center justify-between">
                            <p class="text-sm font-medium text-gray-900">System Update</p>
                            <span class="text-xs text-gray-500">1 day ago</span>
                        </div>
                        <p class="mt-1 text-sm text-gray-600">
                            New feature: You can now add multiple photos to your item listings! Check out the updated item creation page.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Swap Completed -->
            <div class="bg-white border-l-4 border-gray-300 rounded-lg shadow-md p-6 notification-item read" data-id="5" data-type="swap">
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-check-circle text-green-600"></i>
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center justify-between">
                            <p class="text-sm font-medium text-gray-900">Swap Completed</p>
                            <span class="text-xs text-gray-500">2 days ago</span>
                        </div>
                        <p class="mt-1 text-sm text-gray-600">
                            Your swap with <strong>Alex Rodriguez</strong> has been completed successfully. You earned <strong>20 points</strong>!
                        </p>
                        <div class="mt-3">
                            <button class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-md transition-colors">
                                Leave Review
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Item Interest -->
            <div class="bg-white border-l-4 border-orange-500 rounded-lg shadow-md p-6 notification-item unread" data-id="6" data-type="swap">
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-heart text-orange-600"></i>
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center justify-between">
                            <p class="text-sm font-medium text-gray-900">Item Interest</p>
                            <div class="flex items-center space-x-2">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                    Unread
                                </span>
                                <span class="text-xs text-gray-500">3 days ago</span>
                            </div>
                        </div>
                        <p class="mt-1 text-sm text-gray-600">
                            <strong>3 users</strong> have shown interest in your "Vintage Band T-Shirt". Consider creating a swap request!
                        </p>
                        <div class="mt-3">
                            <button class="px-3 py-1 bg-orange-600 hover:bg-orange-700 text-white text-sm rounded-md transition-colors">
                                View Interested Users
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Welcome Message -->
            <div class="bg-white border-l-4 border-gray-300 rounded-lg shadow-md p-6 notification-item read" data-id="7" data-type="system">
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-hand-wave text-blue-600"></i>
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center justify-between">
                            <p class="text-sm font-medium text-gray-900">Welcome to ReWear!</p>
                            <span class="text-xs text-gray-500">1 week ago</span>
                        </div>
                        <p class="mt-1 text-sm text-gray-600">
                            Thanks for joining our sustainable fashion community! You've received <strong>50 welcome points</strong> to get started.
                        </p>
                        <div class="mt-3">
                            <button class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-md transition-colors">
                                Getting Started Guide
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Load More -->
        <div class="text-center mt-8">
            <button id="load-more" class="px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-md transition-colors">
                <i class="fas fa-chevron-down mr-2"></i>
                Load More Notifications
            </button>
        </div>

        <!-- Empty State (hidden by default) -->
        <div id="empty-state" class="text-center py-12 hidden">
            <div class="mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4">
                <i class="fas fa-bell-slash text-gray-400 text-2xl"></i>
            </div>
            <h3 class="text-lg font-medium text-gray-900 mb-2">No notifications</h3>
            <p class="text-gray-600 max-w-sm mx-auto">
                You're all caught up! New notifications will appear here when you have activity on your account.
            </p>
        </div>
    </div>
</div>

<!-- Notification Settings Modal -->
<div id="settings-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
    <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
        <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-medium text-gray-900">Notification Settings</h3>
            <button id="close-settings" class="text-gray-400 hover:text-gray-600">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="space-y-4">
            <div class="flex items-center justify-between">
                <label class="text-sm font-medium text-gray-700">Email Notifications</label>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" checked class="sr-only peer">
                    <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
            </div>

            <div class="flex items-center justify-between">
                <label class="text-sm font-medium text-gray-700">Swap Updates</label>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" checked class="sr-only peer">
                    <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
            </div>

            <div class="flex items-center justify-between">
                <label class="text-sm font-medium text-gray-700">Messages</label>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" checked class="sr-only peer">
                    <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
            </div>

            <div class="flex items-center justify-between">
                <label class="text-sm font-medium text-gray-700">Points Transfers</label>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" checked class="sr-only peer">
                    <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
            </div>

            <div class="flex items-center justify-between">
                <label class="text-sm font-medium text-gray-700">System Updates</label>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" class="sr-only peer">
                    <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
            </div>
        </div>

        <div class="mt-6 flex justify-end space-x-3">
            <button id="cancel-settings" class="px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-md transition-colors">
                Cancel
            </button>
            <button id="save-settings" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors">
                Save Changes
            </button>
        </div>
    </div>
</div>

<script>
// Filter notifications
document.getElementById('notification-filter').addEventListener('change', function() {
    const filter = this.value;
    const notifications = document.querySelectorAll('.notification-item');
    
    notifications.forEach(notification => {
        const type = notification.getAttribute('data-type');
        const isUnread = notification.classList.contains('unread');
        
        let show = true;
        
        if (filter === 'unread' && !isUnread) {
            show = false;
        } else if (filter !== 'all' && filter !== 'unread' && type !== filter) {
            show = false;
        }
        
        notification.style.display = show ? 'block' : 'none';
    });
});

// Mark all as read
document.getElementById('mark-all-read').addEventListener('click', function() {
    const unreadNotifications = document.querySelectorAll('.notification-item.unread');
    
    unreadNotifications.forEach(notification => {
        notification.classList.remove('unread');
        notification.classList.add('read');
        
        // Update border color
        notification.classList.remove('border-blue-500', 'border-green-500', 'border-orange-500');
        notification.classList.add('border-gray-300');
        
        // Remove unread badge
        const unreadBadge = notification.querySelector('.bg-blue-100, .bg-green-100, .bg-orange-100');
        if (unreadBadge) {
            unreadBadge.remove();
        }
    });
    
    // Update header notification count (if exists)
    const notificationCount = document.querySelector('.notification-count');
    if (notificationCount) {
        notificationCount.textContent = '0';
        notificationCount.classList.add('hidden');
    }
});

// Clear all notifications
document.getElementById('clear-all').addEventListener('click', function() {
    if (confirm('Are you sure you want to clear all notifications? This action cannot be undone.')) {
        const notifications = document.querySelectorAll('.notification-item');
        notifications.forEach(notification => notification.remove());
        
        // Show empty state
        document.getElementById('empty-state').classList.remove('hidden');
    }
});

// Settings modal
const settingsModal = document.getElementById('settings-modal');
const settingsButton = document.getElementById('notification-settings');
const closeSettings = document.getElementById('close-settings');
const cancelSettings = document.getElementById('cancel-settings');
const saveSettings = document.getElementById('save-settings');

settingsButton.addEventListener('click', () => {
    settingsModal.classList.remove('hidden');
});

closeSettings.addEventListener('click', () => {
    settingsModal.classList.add('hidden');
});

cancelSettings.addEventListener('click', () => {
    settingsModal.classList.add('hidden');
});

saveSettings.addEventListener('click', () => {
    // Save settings logic would go here
    settingsModal.classList.add('hidden');
    
    // Show success message
    const successMessage = document.createElement('div');
    successMessage.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-md shadow-lg z-50';
    successMessage.textContent = 'Notification settings saved successfully!';
    document.body.appendChild(successMessage);
    
    setTimeout(() => {
        successMessage.remove();
    }, 3000);
});

// Load more notifications
document.getElementById('load-more').addEventListener('click', function() {
    // In a real app, this would load more notifications from the server
    this.textContent = 'Loading...';
    this.disabled = true;
    
    setTimeout(() => {
        this.textContent = 'Load More Notifications';
        this.disabled = false;
    }, 1000);
});

// Individual notification actions
document.querySelectorAll('.notification-item').forEach(notification => {
    // Mark as read when clicked
    notification.addEventListener('click', function() {
        if (this.classList.contains('unread')) {
            this.classList.remove('unread');
            this.classList.add('read');
            
            // Update border color
            this.classList.remove('border-blue-500', 'border-green-500', 'border-orange-500');
            this.classList.add('border-gray-300');
            
            // Remove unread badge
            const unreadBadge = this.querySelector('.bg-blue-100, .bg-green-100, .bg-orange-100');
            if (unreadBadge) {
                unreadBadge.remove();
            }
        }
    });
});

// Close modal when clicking outside
settingsModal.addEventListener('click', function(e) {
    if (e.target === this) {
        this.classList.add('hidden');
    }
});
</script>
` %>

<%- include('shared/layout', { body: content }) %>
